# Хеш-таблица (Hash Table)

## Описание структуры  
Хеш-таблица — это структура данных, которая реализует отображение ключ → значение с использованием хеш-функции.  
Она позволяет быстро находить, вставлять и удалять элементы по ключу, обычно за O(1) в среднем случае.

Основные компоненты:  
- **Хеш-функция** — функция, которая преобразует ключ в индекс массива. Должна быть быстрой и распределять ключи равномерно.  
- **Массив (bucket array)** — основное хранилище, где расположены элементы или ссылки на них.  
- **Ключ** — уникальный идентификатор для доступа к значению.  
- **Значение** — данные, связанные с ключом.  
- **Коллизия** — ситуация, когда два разных ключа получают один и тот же индекс от хеш-функции.

---

## Как работает хеш-таблица  

1. **Хеширование ключа** — хеш-функция преобразует ключ в числовой индекс.  
2. **Вычисление индекса** — индекс приводится к диапазону размера массива (обычно через операцию модуля: индекс = хеш % размер_массива).  
3. **Сохранение/поиск** — значение сохраняется или ищется по вычисленному индексу.  
4. **Разрешение коллизий** — если два ключа приводят к одному индексу, используется один из методов разрешения коллизий.

---

## Виды хеш-таблиц  

### По методу разрешения коллизий  

#### Метод цепочек (Chaining)  
- В каждом индексе массива хранится **связанный список** (или другая коллекция) пар ключ-значение.  
- При коллизии новый элемент добавляется в цепочку.  
- Простой метод, но может привести к деградации производительности при частых коллизиях.  

Пример:

Индекс 0: [ключ1 → значение1]
Индекс 1: [ключ2 → значение2] → [ключ5 → значение5] (коллизия)
Индекс 2: [ключ3 → значение3]


#### Открытая адресация (Open Addressing)  
Если позиция занята, ищется следующая свободная позиция по определённому правилу:

- **Линейное исследование (Linear Probing)** — проверяются индексы последовательно: i, i+1, i+2, ...  
- **Квадратичное исследование (Quadratic Probing)** — проверяются индексы по схеме: i, i+1², i+2², i+3², ...  
- **Двойное хеширование (Double Hashing)** — используется вторая хеш-функция для вычисления шага поиска.

#### Метод умножения (Multiplication Method)  
Специальный способ распределения элементов, часто используется вместе с открытой адресацией.

#### Перехеширование (Rehashing)  
Когда таблица становится слишком заполненной (коэффициент заполнения близок к 1), создаётся новая таблица большего размера и все элементы переносятся туда.

---

## Функции хеша  

### Требования к хорошей хеш-функции  
- **Детерминированность** — один ключ всегда должен давать один результат.  
- **Равномерное распределение** — минимизация коллизий.  
- **Быстрота вычисления** — О(1) или близко к этому.  
- **Эффективность** — мало потребляет ресурсов.

### Примеры хеш-функций  
- **Для целых чисел** — остаток от деления (k % size).  
- **Для строк** — суммирование ASCII-кодов символов, полиномиальная функция.  
- **Криптографические хеши** — SHA-256, MD5 (для более сложных задач).

---

## Основные операции  

- **Вставка (Insert)** — O(1) в среднем, O(n) в худшем случае.  
- **Поиск (Search)** — O(1) в среднем, O(n) в худшем случае.  
- **Удаление (Delete)** — O(1) в среднем, O(n) в худшем случае.  
- **Перестроение таблицы (Rehash)** — O(n), выполняется редко.

---

## Коэффициент заполнения  

Коэффициент заполнения (Load Factor) = количество_элементов / размер_таблицы.

- Обычно поддерживается в диапазоне 0.5 - 0.75.  
- Если коэффициент превышает порог (часто 0.75), выполняется перестроение таблицы.  
- Меньший коэффициент означает больше памяти, но меньше коллизий.

---

## Применение хеш-таблиц  

- **Словари и ассоциативные массивы** — реализация dict в Python, HashMap в Java, объектов в JavaScript.  
- **Системы кэширования** — быстрый доступ к часто используемым данным.  
- **Индексирование баз данных** — быстрый поиск записей по первичному ключу.  
- **Обнаружение дубликатов** — проверка, содержится ли элемент в наборе.  
- **Подсчёт частоты элементов** — подсчёт вхождений каждого элемента.  
- **Проверка орфографии** — быстрый поиск слова в словаре.  
- **Криптография** — вычисление контрольных сумм и подписей.  
- **Компиляторы** — таблица символов для хранения переменных и функций.

---

## Сравнение методов разрешения коллизий  

| Метод | Преимущества | Недостатки |
|---|---|---|
| **Chaining** | Простая реализация, хорошо при высоком коэффициенте заполнения | Дополнительная память на указатели, утечки кэша |
| **Linear Probing** | Экономна память, хороша для кэша | Кластеризация, высокая вероятность коллизий |
| **Quadratic Probing** | Уменьшает кластеризацию | Более сложная реализация |
| **Double Hashing** | Хорошее распределение | Требует двух хеш-функций, сложнее реализовать |

---

## Итог  

Хеш-таблица — одна из самых важных и широко используемых структур данных.  
Выбор метода разрешения коллизий и хеш-функции критичен для производительности.  
Понимание хеш-таблиц необходимо для эффективного программирования и оптимизации приложений.
