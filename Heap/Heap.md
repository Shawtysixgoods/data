# Куча (Heap)

## Описание структуры  
Куча (Heap) — это специальный вид полного бинарного дерева, который удовлетворяет свойству кучи: для каждого узла значение родителя либо больше (Max Heap), либо меньше (Min Heap) значений его потомков.

Основные характеристики:  
- **Полнота** — куча является полным бинарным деревом: все уровни заполнены полностью, кроме последнего, который заполняется слева направо.  
- **Хаотичность** — элементы не отсортированы полностью, в отличие от отсортированного массива.  
- **Эффективность** — операции вставки, удаления и поиска минимума/максимума выполняются за логарифмическое время O(log n).

Куча обычно реализуется через массив, где для узла с индексом i:  
- Левый потомок находится по индексу 2*i + 1.  
- Правый потомок находится по индексу 2*i + 2.  
- Родитель находится по индексу (i - 1) / 2.

---

## Виды куч  

### Максимальная куча (Max Heap)  
- Значение родителя **всегда больше или равно** значениям его потомков.  
- Максимальный элемент находится всегда в корне (на вершине).  
- Используется для поиска максимума и приоритетных очередей, где больший приоритет — больший элемент.

Пример:
   100
   / \
  50  40
 / \  / \
30 20 10 5

### Минимальная куча (Min Heap)  
- Значение родителя **всегда меньше или равно** значениям его потомков.  
- Минимальный элемент находится всегда в корне (на вершине).  
- Используется для поиска минимума и приоритетных очередей, где меньший приоритет — меньший элемент.

Пример:
    5
  /   \
 20    10
/ \    / \
30 50 40 100


### Двоичная куча (Binary Heap)  
Наиболее распространённый вид кучи, реализуется как полное бинарное дерево.

### Биномиальная куча (Binomial Heap)  
Коллекция биномиальных деревьев, которые позволяют эффективнее реализовать операции слияния.

### Фибоначчиева куча (Fibonacci Heap)  
Обобщение биномиальной кучи с улучшенными амортизированными временами операций.

---

## Как строится структура  

### Представление через массив  
Куча хранится в одномерном массиве, где элементы располагаются уровень за уровнем, слева направо.


### Операция "просеивание вверх" (Sift Up)  
При вставке нового элемента он добавляется в конец массива, затем сравнивается с родителем и перемещается вверх, пока не будет восстановлено свойство кучи.

### Операция "просеивание вниз" (Sift Down)  
После удаления корня последний элемент перемещается в корень, затем сравнивается с потомками и перемещается вниз, пока не будет восстановлено свойство кучи.

---

## Основные операции  

- **Вставка (Insert)** — O(log n). Элемент добавляется в конец, затем просеивается вверх.  
- **Удаление корня (Delete Root)** — O(log n). Корень удаляется, последний элемент становится корнем и просеивается вниз.  
- **Поиск минимума/максимума** — O(1). В Min Heap минимум — корень, в Max Heap максимум — корень.  
- **Построение кучи (Heapify)** — O(n). Преобразование массива в кучу.  
- **Сортировка кучей (Heap Sort)** — O(n log n). Сортировка с использованием кучи.

---

## Применение куч  

- **Приоритетные очереди** — элементы извлекаются в порядке приоритета, а не FIFO.  
- **Сортировка** — алгоритм heap sort для эффективной сортировки данных.  
- **Поиск k-го наибольшего/наименьшего элемента** — использование Min Heap для поиска k максимумов или Max Heap для k минимумов.  
- **Синтаксический анализ** — построение кодов Хаффмана для сжатия данных.  
- **Системы реального времени** — управление задачами по приоритетам.  
- **Алгоритм Дейкстры** — поиск кратчайшего пути с использованием приоритетной очереди на основе кучи.  
- **Планировщики операционных систем** — управление процессами по приоритетам.

---

## Итог  

Куча — это эффективная структура данных для работы с приоритетами и экстремальными значениями.  
Min Heap и Max Heap — два дополнительных варианта с противоположными свойствами упорядочения.  
Выбор типа кучи зависит от задачи и определения приоритета элементов.  
 
